<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>LED Rotator</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>

<body>
    <div class="app-container">
        <div class="sidebar">
            <div class="header">
                <h1>LED Rotator</h1>
            </div>

            <div class="control-group">
                <h3>Shader Selection</h3>
                <div class="control-item">
                    <label for="shader-select">Rotation Pattern:</label>
                    <select id="shader-select"></select>
                </div>
                <div id="shader-params-container"></div>
            </div>

            <div class="control-group" id="global-params">
                <h3>Global Options</h3>
                <div class="control-item">
                    <label for="global-central-object">Central Object ID:</label>
                    <input type="text" id="global-central-object" placeholder="Leave empty for centroid">
                </div>
                <div class="control-item">
                    <label for="global-center-threshold">Center Threshold:</label>
                    <input type="number" id="global-center-threshold" step="0.001" value="0.001">
                    <div class="param-description">Minimum distance from center to apply rotation</div>
                </div>
                <div class="control-item">
                    <label for="global-fixed-center-angle">Fixed Center Angle (degrees):</label>
                    <input type="number" id="global-fixed-center-angle" step="1" value="0">
                    <div class="param-description">Angle for LEDs at the center point</div>
                </div>
            </div>

            <div class="button-group">
                <button id="import-btn">Import CSV</button>
                <button id="export-btn">Export CSV</button>
            </div>
        </div>

        <div class="canvas-container">
            <canvas id="canvas" width="800" height="600"></canvas>
        </div>
    </div>

    <!-- Import Modal -->
    <div id="import-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Import LED Positions</h3>
                <button class="close-button" id="import-close">&times;</button>
            </div>
            <p>Paste CSV data in the format: label,x,y (one entry per line)</p>
            <textarea id="import-csv-text" placeholder="D01,17.018,17.018
D02,17.018,8.382
..."></textarea>
            <div id="import-error"></div>
            <div class="modal-footer">
                <button id="import-cancel">Cancel</button>
                <button id="import-submit">Import</button>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="export-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Export LED Angles</h3>
                <button class="close-button" id="export-close">&times;</button>
            </div>
            <p>The CSV below contains the LED labels and calculated angles:</p>
            <textarea id="export-csv-text" readonly></textarea>
            <div class="modal-footer">
                <button id="export-copy">Copy to Clipboard</button>
                <button id="export-download">Download</button>
            </div>
        </div>
    </div>

</body>

</html>